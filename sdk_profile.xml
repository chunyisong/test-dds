<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="file:///Fast-DDS_ws/src/fastrtps/resources/xsd/fastRTPS_profiles.xsd"?>
<dds>
    <profiles xmlns="http://www.eprosima.com/XMLSchemas/fastRTPS_Profiles">
        <data_writer profile_name="writer_profile" is_default_profile="true">
            <historyMemoryPolicy>PREALLOCATED</historyMemoryPolicy>
            <topic>
                <historyQos>
                    <kind>KEEP_LAST</kind>
                    <depth>1</depth>
                </historyQos>
                <resourceLimitsQos>
                    <max_samples_per_instance>1</max_samples_per_instance>
                    <max_instances>2000000</max_instances>
                    <allocated_samples>1000</allocated_samples>
                    <max_samples>0</max_samples>
                </resourceLimitsQos>
            </topic>
            <qos>
                <disable_heartbeat_piggyback>false</disable_heartbeat_piggyback>
                <data_sharing>
                    <kind>OFF</kind>
                </data_sharing>
                <publishMode>
                    <kind>SYNCHRONOUS</kind>
                </publishMode>
                <lifespan>
                    <duration>
                        <sec>DURATION_INFINITY</sec>
                        <nanosec>0</nanosec>
                    </duration>
                </lifespan>
                <deadline>
                    <period>
                        <sec>DURATION_INFINITY</sec>
                        <nanosec>0</nanosec>
                    </period>
                </deadline>
                <durability>
                    <kind>VOLATILE</kind>
                </durability>
                <reliability>
                    <kind>RELIABLE</kind>
                    <max_blocking_time>
                        <sec>2</sec>
                        <nanosec>0</nanosec>
                    </max_blocking_time>
                </reliability>
                <disablePositiveAcks>
                    <enabled>true</enabled>
                    <duration>
                        <sec>1</sec>
                    </duration>
                </disablePositiveAcks>
                <liveliness>
                    <kind>AUTOMATIC</kind>
                    <lease_duration>
                        <sec>DURATION_INFINITY</sec>
                    </lease_duration>
                    <announcement_period>
                        <sec>30</sec>
                        <nanosec>0</nanosec>
                    </announcement_period>
                </liveliness>
            </qos>
        </data_writer>
        <data_reader profile_name="reader_profile" is_default_profile="true">
            <historyMemoryPolicy>PREALLOCATED</historyMemoryPolicy>
            <topic>
                <historyQos>
                    <kind>KEEP_LAST</kind>
                    <depth>1</depth>
                </historyQos>
                <resourceLimitsQos>
                    <max_samples_per_instance>1</max_samples_per_instance>
                    <allocated_samples>1000</allocated_samples>
                    <max_instances>2000000</max_instances>
                    <extra_samples>100</extra_samples>
                    <max_samples>0</max_samples>
                </resourceLimitsQos>
            </topic>
            <qos>
                <data_sharing>
                    <kind>OFF</kind>
                </data_sharing>
                <lifespan>
                    <duration>
                        <sec>DURATION_INFINITY</sec>
                        <nanosec>0</nanosec>
                    </duration>
                </lifespan>
                <deadline>
                    <period>
                        <sec>DURATION_INFINITY</sec>
                        <nanosec>0</nanosec>
                    </period>
                </deadline>
                <durability>
                    <kind>VOLATILE</kind>
                </durability>
                <reliability>
                    <!-- <kind>BEST_EFFORT</kind> -->
                    <kind>RELIABLE</kind>
                </reliability>
                <disablePositiveAcks>
                    <enabled>true</enabled>
                </disablePositiveAcks>
                <liveliness>
                    <kind>AUTOMATIC</kind>
                    <lease_duration>
                        <sec>DURATION_INFINITY</sec>
                    </lease_duration>
                    <announcement_period>
                        <sec>30</sec>
                        <nanosec>0</nanosec>
                    </announcement_period>
                </liveliness>
            </qos>
        </data_reader>
        <transport_descriptors>
            <transport_descriptor>
                <transport_id>transport_tcp4</transport_id>
                <type>TCPv4</type>
                <maxMessageSize>1300</maxMessageSize>
                <interfaceWhiteList>
                    <interface>lo</interface>
                </interfaceWhiteList>
                <listening_ports>
                    <port>0</port>
                </listening_ports>
                <enable_tcp_nodelay>false</enable_tcp_nodelay>
                <calculate_crc>false</calculate_crc>
                <check_crc>false</check_crc>
            </transport_descriptor>
        </transport_descriptors>
        <participant profile_name="participant_profile" is_default_profile="true">
            <domainId>0</domainId>
            <rtps>
                <participantID>0</participantID>
                <name>test-dds</name>
                <propertiesPolicy>
                    <properties>
                        <property>
                            <name>fastdds.ignore_local_endpoints</name>
                            <value>true</value>
                        </property>
                    </properties>
                </propertiesPolicy>
                <useBuiltinTransports>false</useBuiltinTransports>
                <allocation>
                    <send_buffers>
                        <preallocated_number>0</preallocated_number>
                        <dynamic>true</dynamic>
                    </send_buffers>
                </allocation>
                <userTransports>
                    <transport_id>transport_tcp4</transport_id>
                </userTransports>
                <builtin>
                    <avoid_builtin_multicast>true</avoid_builtin_multicast>
                    <discovery_config>
                        <ignoreParticipantFlags>FILTER_SAME_PROCESS</ignoreParticipantFlags>
                        <discoveryProtocol>CLIENT</discoveryProtocol>
                        <discoveryServersList>
                            <!-- Set remote server configuration Prefix  -->
                            <RemoteServer prefix="44.53.00.5f.45.50.52.4f.53.49.4d.41">
                                <metatrafficUnicastLocatorList>
                                    <!-- Set SERVER's listening locator for PDP -->
                                    <locator>
                                        <!-- <udpv4>
                                            <port>17480</port>
                                            <address>172.16.220.121</address>
                                        </udpv4> -->
                                        <tcpv4>
                                            <port>17480</port>
                                            <physical_port>17480</physical_port>
                                            <address>127.0.0.1</address>
                                        </tcpv4>
                                    </locator>
                                </metatrafficUnicastLocatorList>
                            </RemoteServer>
                        </discoveryServersList>
                        <clientAnnouncementPeriod>
                            <sec>5</sec>
                            <nanosec>0</nanosec>
                        </clientAnnouncementPeriod>
                        <EDP>SIMPLE</EDP>
                        <simpleEDP>
                            <PUBWRITER_SUBREADER>true</PUBWRITER_SUBREADER>
                            <PUBREADER_SUBWRITER>true</PUBREADER_SUBWRITER>
                        </simpleEDP>
                        <leaseDuration>
                            <sec>30</sec>
                            <nanosec>0</nanosec>
                        </leaseDuration>
                        <leaseAnnouncement>
                            <sec>10</sec>
                            <nanosec>0</nanosec>
                        </leaseAnnouncement>
                        <initialAnnouncements>
                            <count>5</count>
                            <period>
                                <sec>2</sec>
                                <nanosec>0</nanosec>
                            </period>
                        </initialAnnouncements>
                    </discovery_config>
                    <!-- <initialPeersList>
                        <locator>
                            <tcpv4>
                                <port>37410</port>
                                <physical_port>18010</physical_port>
                                <address>127.0.0.1</address>
                            </tcpv4>
                        </locator>
                    </initialPeersList> -->
                    <metatrafficUnicastLocatorList>
                        <locator>
                            <tcpv4></tcpv4>
                        </locator>
                    </metatrafficUnicastLocatorList>
                </builtin>
                <defaultUnicastLocatorList>
                    <locator>
                        <tcpv4></tcpv4>
                    </locator>
                </defaultUnicastLocatorList>
                <port>
                    <portBase>37400</portBase>
                </port>
            </rtps>
        </participant>
    </profiles>
</dds>
